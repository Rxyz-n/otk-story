(this["webpackJsonpotk-story"]=this["webpackJsonpotk-story"]||[]).push([[0],{107:function(n,e,t){n.exports=t.p+"static/media/logo.6ad731b9.png"},120:function(n,e,t){n.exports=t(176)},176:function(n,e,t){"use strict";t.r(e);var r=t(0),a=t.n(r),o=t(8),c=t.n(o),i=t(38),l=t(12),u="".concat("/otk-story","/theme"),d={default:localStorage.getItem("APP_THEME")||"light",themeMap:{light:"".concat(u,"/light.theme.css"),dark:"".concat(u,"/dark.theme.css")}},s=function(n){var e=document.createElement("link");return Object.keys(n).forEach((function(t){"onload"===t&&(e.onload=n.onload),e[t]=n[t]})),e},m=function(n){var e=document.head.querySelector("title");document.head.insertBefore(n,e)},f=Object(r.createContext)();var p=function(n){var e=n.children,t=Object(r.useState)("loading"),o=Object(i.a)(t,2),c=o[0],u=o[1],p=Object(r.useState)(null),g=Object(i.a)(p,2),b=g[0],h=g[1];Object(r.useEffect)((function(){Object.keys(d.themeMap).forEach((function(n){var e=s({rel:"prefetch",as:"style",href:d.themeMap[n],id:"".concat(n,"-theme-prefetch")});m(e)}))}),[]),Object(r.useEffect)((function(){v(d.default)}),[]),Object(r.useEffect)((function(){"loading"===c?(document.body.classList.remove("theme-loaded"),document.body.classList.add("theme-loading")):(document.body.classList.remove("theme-loading"),document.body.classList.add("theme-loaded"))}),[c]);var v=function(n){if(n!==b){var e=document.getElementById("current-theme");e&&e.remove(),u("loading");var t=s({type:"text/css",rel:"stylesheet",id:"current-theme",href:d.themeMap[n],onload:function(){return u("loaded")}});localStorage.setItem("APP_THEME",n),m(t),h(n)}};return a.a.createElement(f.Provider,{value:{status:c,themes:Object.keys(d.themeMap).reduce((function(n,e){return n[e]=e,n}),{}),currentTheme:b,switchTheme:v}},a.a.createElement(l.a,{theme:{mode:b}},e))},g=t(46),b=t(34),h=t.n(b),v=Object(r.createContext)(),E={date:h()(),loading:!1,error:!1,stories:[],story:[],currentImage:{}};function x(n,e){var t=e.type,r=e.payload;switch(t){case"DATE_CHANGE":return Object(g.a)({},n,{date:r});case"FETCHING":return Object(g.a)({},n,{loading:!0,error:!1});case"SET_STORIES":return Object(g.a)({},n,{loading:!1,stories:r});case"FETCH_FAILED":return Object(g.a)({},n,{loading:!1,error:!0});case"ADD_STORY":var a=n.stories.find((function(n){return n.date===r.date})).story,o=a.findIndex((function(n){return n.Id===r.id}));return Object(g.a)({},n,{story:a,currentImage:Object(g.a)({},a[o],{idx:o,isFirstImage:0===o,isLastImage:o===a.length-1})});case"REMOVE_STORY":return Object(g.a)({},n,{story:[],currentImage:{}});case"CHANGE_CURRENT_IMAGE":var c=n.currentImage.idx+r;return Object(g.a)({},n,{currentImage:Object(g.a)({},n.story[c],{idx:c,isFirstImage:0===c,isLastImage:c===n.story.length-1})});default:return n}}function y(){return Object(r.useContext)(v)}var k=function(n){var e=n.children,t=Object(r.useReducer)(x,E),o=Object(i.a)(t,2),c=o[0],l=o[1];return a.a.createElement(v.Provider,{value:{state:c,dispatch:l}},e)},O=t(15);function j(){var n=Object(O.a)(["\n    body {\n      font-family: 'IBM Plex Sans', sans-serif;\n      background: ",";\n      color: ",";\n      transition: opacity 0.2s;\n\n      &.theme-loading {\n        display: none;\n      }\n      &.theme-loaded {\n        display: block;\n      }\n    }\n  "]);return j=function(){return n},n}function w(){var n=Object(O.a)(["\n  ","\n\n  .ant-back-top {\n    right: 30px;\n    bottom: 30px;\n  }\n\n  .ant-back-top-icon {\n    font-size: 20px;\n  }\n\n  .ant-modal-mask {\n    background-color: rgba(0,0,0,.7);\n  }\n\n  .ant-modal-body {\n    padding: 0;\n  }\n\n  .ant-modal-body > div:not(.loaded) {\n    height: 45rem;\n  }\n\n  ::-webkit-scrollbar {\n    width: 11px;\n    height: 10px;\n    background: transparent;\n  }\n\n  ::-webkit-scrollbar-button {\n    width: 0;\n    height: 0;\n    display: none;\n  }\n\n  ::-webkit-scrollbar-corner {\n    background: transparent;\n  }\n\n  ::-webkit-scrollbar-thumb {\n    height: 6px;\n    border: 2px solid transparent;\n    background-clip: padding-box;\n    border-radius: 7px;\n    background-color: ",";\n  }\n"]);return w=function(){return n},n}var C=Object(l.b)(w(),(function(n){var e=n.theme;return Object(l.c)(j(),"dark"===e.mode?"#18191a":"#eef0f1","dark"===e.mode?"#ffffff":"#000000")}),(function(n){return"dark"===n.theme.mode?"rgba(255, 255, 255, 0.6)":"rgba(0,0,0,.2)"})),I=t(185),N=t(177);function T(){var n=Object(O.a)(["\n  padding: 1rem 50px;\n  font-size: 1rem;\n  letter-spacing: 0.5px;\n\n  a:hover {\n    text-decoration: underline;\n  }\n"]);return T=function(){return n},n}function S(){var n=Object(O.a)(["\n  padding: 0 50px;\n  margin-top: 50px;\n  flex-grow: 1;\n"]);return S=function(){return n},n}function _(){var n=Object(O.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  overflow: hidden;\n\n  .logo {\n    width: 170px;\n\n    img {\n      width: 100%;\n      margin-bottom: 4px;\n    }\n  }\n\n  ul {\n    display: flex;\n    justify-content: flex-end;\n    border-bottom: none;\n    background: transparent;\n  }\n\n  .menu-icon {\n    margin-top: 8px !important;\n\n    span {\n      font-size: 1.5rem;\n    }\n  }\n\n  .ant-menu-item-active,\n  .ant-menu-item-selected,\n  .ant-menu-submenu,\n  .ant-menu-item {\n    border-bottom: none !important;\n    background: transparent;\n  }\n\n  @media (max-width: 575.98px) {\n    .ant-menu-item {\n      margin-left: 5px !important;\n    }\n  }\n"]);return _=function(){return n},n}function A(){var n=Object(O.a)(["\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n"]);return A=function(){return n},n}var M=Object(l.d)(N.a)(A()),Y=Object(l.d)(N.a.Header)(_()),R=Object(l.d)(N.a.Content)(S()),z=Object(l.d)(N.a.Footer)(T()),D=t(181),F=t(186),L=t(187),Z=t(107),H=t.n(Z);var P=function(){var n=Object(r.useContext)(f),e=n.currentTheme,t=n.switchTheme;return a.a.createElement(Y,null,a.a.createElement("a",{href:"/",className:"logo"},a.a.createElement("img",{src:H.a,alt:"logo"})),a.a.createElement(D.a,{mode:"horizontal",selectedKeys:[]},a.a.createElement(D.a.Item,{key:"1",className:"light"===e?"menu-icon ant-menu-item-selected":"menu-icon",onClick:function(){t("light"===e?"dark":"light")}},a.a.createElement(F.a,null)),a.a.createElement(D.a.Item,{className:"menu-icon",style:{marginRight:0},onClick:function(){return[window.open("https://github.com/Nagai-Nano/otk-story","_blank")]}},a.a.createElement(L.a,null))))};var G=function(n){var e=n.children;return a.a.createElement(R,null,e)};var X=function(){return a.a.createElement(z,null,"Created by"," ",a.a.createElement("a",{href:"https://www.facebook.com/Nanoooooooooooooooooooooooooooooooooooooooooooooox",target:"_blank",rel:"noopener noreferrer"},"Nano")," ","\u2764\ufe0f"," ",a.a.createElement("a",{href:"https://github.com/Nagai-Nano/otk-story",target:"_blank",rel:"noopener noreferrer"},"Otk-story"))},U=t(178),B=t(56),q=t(188),J=t(189);function K(){var n=Object(O.a)(["\n  display: flex;\n  justify-content: flex-end;\n\n  button {\n    margin-left: 6px;\n\n    span {\n      font-size: 15px !important;\n    }\n  }\n\n  .ant-picker {\n    width: 16rem;\n\n    @media (max-width: 767.98px) {\n      flex-grow: 1;\n    }\n  }\n"]);return K=function(){return n},n}var V=l.d.div(K());var Q=function(){var n=Object(r.useState)(h()()),e=Object(i.a)(n,2),t=e[0],o=e[1],c=y(),l=c.state,u=c.dispatch,d=function(n){return function(){var e=t.clone().add(n,"days");s(e)}},s=function(n){o(n),u({type:"DATE_CHANGE",payload:n})};return a.a.createElement(V,null,a.a.createElement(U.a,{size:"large",value:t,format:"DD/MM/YYYY",allowClear:!1,onChange:s,disabled:l.loading}),a.a.createElement(B.a,{size:"large",icon:a.a.createElement(q.a,null),loading:l.loading,disabled:l.loading,onClick:d(-7)}),a.a.createElement(B.a,{size:"large",icon:a.a.createElement(J.a,null),loading:l.loading,disabled:l.loading,onClick:d(7)}))},W=t(72),$=t.n(W),nn=t(93),en=t(184);function tn(){var n=Object(O.a)(["\n  margin-top: 25px;\n"]);return tn=function(){return n},n}var rn=l.d.div(tn());function an(){var n=Object(O.a)(["\n  position: relative;\n  display: block;\n  height: 100%;\n  width: 100%;\n\n  .line {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    animation-duration: 1s;\n    border-left-width: calc(60px / 25);\n    border-top-width: calc(60px / 25);\n    border-left-color: #13c2c2;\n    border-left-style: solid;\n    border-top-style: solid;\n    border-top-color: transparent;\n\n    &:nth-child(1) {\n      animation: "," 1s linear infinite;\n      transform: rotateZ(120deg) rotateX(66deg) rotateZ(0deg);\n    }\n\n    &:nth-child(2) {\n      animation: "," 1s linear infinite;\n      transform: rotateZ(240deg) rotateX(66deg) rotateZ(0deg);\n    }\n\n    &:nth-child(3) {\n      animation: "," 1s linear infinite;\n      transform: rotateZ(360deg) rotateX(66deg) rotateZ(0deg);\n    }\n  }\n\n  .circle {\n    display: block;\n    position: absolute;\n    color: #13c2c2;\n    font-size: calc(60px * 0.24);\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n  }\n"]);return an=function(){return n},n}function on(){var n=Object(O.a)(["\n  height: 60px;\n  width: 60px;\n  overflow: hidden;\n"]);return on=function(){return n},n}function cn(){var n=Object(O.a)(["\n  width: 100%;\n  height: 50vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return cn=function(){return n},n}function ln(){var n=Object(O.a)(["\n  100% {\n    transform: rotateZ(360deg) rotateX(66deg) rotateZ(360deg);\n  }\n"]);return ln=function(){return n},n}function un(){var n=Object(O.a)(["\n  100% {\n    transform: rotateZ(240deg) rotateX(66deg) rotateZ(360deg);\n  }\n"]);return un=function(){return n},n}function dn(){var n=Object(O.a)(["\n  100% {\n    transform: rotateZ(120deg) rotateX(66deg) rotateZ(360deg);\n  }\n"]);return dn=function(){return n},n}var sn=Object(l.e)(dn()),mn=Object(l.e)(un()),fn=Object(l.e)(ln()),pn=l.d.div(cn()),gn=l.d.div(on()),bn=l.d.div(an(),sn,mn,fn);var hn=function(){return a.a.createElement(pn,null,a.a.createElement(gn,null,a.a.createElement(bn,null,a.a.createElement("div",{className:"line"}),a.a.createElement("div",{className:"line"}),a.a.createElement("div",{className:"line"}),a.a.createElement("div",{className:"circle"},"\u25cf"))))},vn=t(191),En=t(192),xn=t(193),yn=t(182),kn=t(179);function On(){var n=Object(O.a)(["\n  grid-column: 1/-1;\n  text-align: center;\n  font-size: 1.2rem;\n  text-transform: uppercase;\n  color: ",";\n  padding: 1rem;\n  letter-spacing: 1px;\n"]);return On=function(){return n},n}function jn(){var n=Object(O.a)(["\n  border-radius: 4px;\n  background: transparent;\n  border-color: ",";\n  overflow: hidden;\n\n  &:hover .ant-card-cover img {\n    transform: scale(1.05);\n  }\n\n  .ant-card-body {\n    display: none;\n  }\n\n  .ant-card-cover {\n    height: 22rem;\n    overflow: hidden;\n  }\n\n  .ant-card-actions {\n    border-radius: 4px;\n    border-top: 0;\n    background: ",";\n\n    .anticon {\n      opacity: 1;\n      color: ",";\n\n      &:hover {\n        color: #13c2c2;\n      }\n    }\n\n    li:not(:last-child) {\n      border-right-color: ",";\n    }\n  }\n"]);return jn=function(){return n},n}function wn(){var n=Object(O.a)(["\n  font-size: 1.4rem;\n  font-weight: 500;\n  letter-spacing: 1px;\n  margin-left: 7px;\n"]);return wn=function(){return n},n}function Cn(){var n=Object(O.a)(["\n  margin-bottom: 25px;\n  border-radius: 4px;\n  box-shadow: 0 0 0 1px\n    ",";\n  border: none;\n\n  .ant-collapse-item,\n  .ant-collapse-header {\n    border-radius: 4px !important;\n    border-bottom: 0;\n  }\n\n  .ant-collapse-content {\n    border-top-color: ",";\n  }\n\n  .ant-collapse-content-box {\n    display: grid;\n    grid-template-columns: repeat(6, 1fr);\n    grid-gap: 1rem;\n\n    @media (max-width: 1499.98px) {\n      grid-template-columns: repeat(5, 1fr);\n    }\n\n    @media (max-width: 1199.98px) {\n      grid-template-columns: repeat(4, 1fr);\n    }\n\n    @media (max-width: 991.98px) {\n      grid-template-columns: repeat(3, 1fr);\n    }\n\n    @media (max-width: 767.98px) {\n      grid-template-columns: repeat(2, 1fr);\n    }\n\n    @media (max-width: 575.98px) {\n      grid-template-columns: 1fr;\n    }\n  }\n"]);return Cn=function(){return n},n}var In=Object(l.d)(yn.a)(Cn(),(function(n){return"dark"===n.theme.mode?"rgba(0,0,0,.2)":"#08090a0d"}),(function(n){return"dark"===n.theme.mode?"#393a3b":"#08090a0d"})),Nn=l.d.div(wn()),Tn=Object(l.d)(kn.a)(jn(),(function(n){return"dark"===n.theme.mode?"#393a3b":"#f0f0f0"}),(function(n){return"dark"===n.theme.mode?"#242526":"#ffffff"}),(function(n){return"dark"===n.theme.mode?"#ffffffa6":"#8c8c8c"}),(function(n){return"dark"===n.theme.mode?"#ffffffa6":"#f0f0f0"})),Sn=l.d.div(On(),(function(n){return"dark"===n.theme.mode?"rgba(255,255,255,.4)":"rgba(0,0,0,.4)"})),_n=t(117),An=t(183);function Mn(){var n=Object(O.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  color: #f5222d;\n  font-size: 1.1rem;\n  letter-spacing: 0.2px;\n  background: ",";\n\n  .anticon-warning {\n    font-size: 2rem;\n    margin-bottom: 10px;\n  }\n"]);return Mn=function(){return n},n}function Yn(){var n=Object(O.a)(["\n  height: 100%;\n\n  .ant-skeleton-header,\n  .ant-skeleton-avatar {\n    padding: 0;\n    height: 100%;\n    width: 100%;\n    border-radius: 4px;\n  }\n"]);return Yn=function(){return n},n}function Rn(){var n=Object(O.a)(["\n  width: 100%;\n  height: 100%;\n\n  img {\n    width: 0;\n    height: 0;\n    object-fit: cover;\n    opacity: 0;\n    transition: 0.2s;\n    border-radius: 4px;\n  }\n\n  &.loaded img {\n    opacity: 1;\n    width: 100%;\n    height: 100%;\n  }\n"]);return Rn=function(){return n},n}var zn=l.d.div(Rn()),Dn=Object(l.d)(An.a)(Yn()),Fn=l.d.div(Mn(),(function(n){return"dark"===n.theme.mode?"rgba(255,255,255,.03)":"rgba(0,0,0,.03)"}));var Ln=function(){return a.a.createElement(Dn,{avatar:{shape:"square"},active:!0,loading:!0,paragraph:!1,title:!1})},Zn=t(190);var Hn=function(){return a.a.createElement(Fn,null,a.a.createElement(Zn.a,null),a.a.createElement("span",null,"Failed to load image"))};var Pn=function(n){var e=n.src,t=n.alt,o=n.onImageClick,c=Object(_n.a)(n,["src","alt","onImageClick"]),l=Object(r.useState)(!0),u=Object(i.a)(l,2),d=u[0],s=u[1],m=Object(r.useState)(!1),f=Object(i.a)(m,2),p=f[0],g=f[1],b=Object(r.useRef)();Object(r.useEffect)((function(){var n=document.createElement("img");n.src=e,n.onload=h,n.onerror=v}),[e]);var h=function(){b&&b.current&&(b.current.src=e,g(!1),s(!1))},v=function(){g(!0),s(!1)};return a.a.createElement(zn,{className:d||p?"":"loaded"},d&&a.a.createElement(Ln,null),p&&a.a.createElement(Hn,null),!p&&a.a.createElement("img",Object.assign({},c,{alt:t,ref:b,onClick:d?void 0:o,style:{cursor:!o||d||p?"auto":"pointer"}})))};var Gn=function(n){var e=n.date,t=n.story,r=y().dispatch,o=function(n){return function(){window.open("https://otakusan.net/Cosplay/PictureDetail/".concat(n),"_blank")}};return a.a.createElement(In,{defaultActiveKey:[e],expandIcon:function(n){var e=n.isActive;return a.a.createElement(vn.a,{rotate:e?90:0})}},a.a.createElement(In.Panel,{header:a.a.createElement(Nn,null,h()(e).format("DD/MM/YYYY")),key:e},t.length?t.map((function(n){var t,c,i=n.Id,l=n.ThumbUrl,u=n.Name,d=n.Url;return a.a.createElement(Tn,{key:i,hoverable:!0,cover:a.a.createElement(Pn,{src:l,alt:u,onImageClick:(c=i,function(){r({type:"ADD_STORY",payload:{id:c,date:e}})})}),actions:[a.a.createElement(En.a,{key:"file",onClick:o(i)}),a.a.createElement(xn.a,{key:"download",onClick:(t=d,function(){var n=document.createElement("a");n.href=t,n.target="_blank",n.click()})})]})})):a.a.createElement(Sn,null,"No images found")))};var Xn=function(){var n=y(),e=n.state,t=n.dispatch;Object(r.useEffect)((function(){c()}),[e.date]);var o=function(){var n=Object(nn.a)($.a.mark((function n(e){var t,r;return $.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("".concat("https://service.otakuscan.net/api/cosplayservice/Cosplaybydate","?date=").concat(e));case 2:return t=n.sent,n.next=5,t.json();case 5:return r=n.sent,n.abrupt("return",{date:e,story:r});case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),c=function(){var n=Object(nn.a)($.a.mark((function n(){var r,a,c,i;return $.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=0,a=e.date.clone(),c=[],n.prev=3,t({type:"FETCHING"});do{c.push(o((l=r?1:0,a.subtract(l,"days").format("YYYY-MM-DD")))),r++}while(7>r);return n.next=8,Promise.all(c);case 8:i=n.sent,t({type:"SET_STORIES",payload:i}),n.next=17;break;case 12:n.prev=12,n.t0=n.catch(3),t({type:"FETCH_FAILED"}),en.a.destroy(),en.a.error({message:"Error",description:"Something went wrong, please try again!"});case 17:case"end":return n.stop()}var l}),n,null,[[3,12]])})));return function(){return n.apply(this,arguments)}}();return e.error?null:e.loading?a.a.createElement(hn,null):a.a.createElement(rn,null,e.stories.map((function(n){return a.a.createElement(Gn,Object.assign({key:n.date},n))})))},Un=t(180),Bn=t(194),qn=t(195),Jn=t(196);function Kn(){var n=Object(O.a)(["\n  position: fixed;\n  font-size: 1.3rem;\n  color: #fff;\n  width: 3rem;\n  height: 3rem;\n  z-index: 3090;\n  background: transparent;\n  line-height: 3rem;\n  text-align: center;\n  border-radius: 50%;\n  cursor: pointer;\n  transition: 0.2s;\n\n  &:hover {\n    background: #fff;\n    color: #000;\n  }\n\n  &.close {\n    top: 10px;\n    right: 10px;\n  }\n\n  &.next {\n    right: 12px;\n    top: 50%;\n    transform: translateY(-50%);\n  }\n\n  &.prev {\n    left: 12px;\n    top: 50%;\n    transform: translateY(-50%);\n  }\n"]);return Kn=function(){return n},n}var Vn=l.d.div(Kn());var Qn=function(){var n=Object(r.useState)(!1),e=Object(i.a)(n,2),t=e[0],o=e[1],c=y(),l=c.state,u=c.dispatch,d=l.story,s=l.currentImage,m=s.Name,f=s.Url,p=s.isFirstImage,g=s.isLastImage,b=s.idx;Object(r.useEffect)((function(){return window.addEventListener("keydown",E),function(){return window.removeEventListener("keydown",E)}}),[d,f]);var h=function(){u({type:"REMOVE_STORY"}),o(!1)},v=function(n){return function(){u({type:"CHANGE_CURRENT_IMAGE",payload:n})}},E=function(n){var e=n.code;(d.length||f)&&("ArrowLeft"!==e||p||v(-1)(),"ArrowRight"!==e||g||v(1)())};return a.a.createElement(a.a.Fragment,null,!!d.length&&a.a.createElement(a.a.Fragment,null,a.a.createElement(Vn,{className:"close",onClick:h},a.a.createElement(Bn.a,null)),!p&&a.a.createElement(Vn,{className:"prev",onClick:v(-1)},a.a.createElement(qn.a,null)),!g&&a.a.createElement(Vn,{className:"next",onClick:v(1)},a.a.createElement(Jn.a,null))),a.a.createElement(Un.a,{closable:!1,visible:!!d.length,onCancel:h,centered:!0,destroyOnClose:!0,footer:null,width:t?"auto":600},!!f&&a.a.createElement(Pn,{key:b,src:f,alt:m,onImageClick:function(){o((function(n){return!n}))}})))};var Wn=function(){return a.a.createElement(M,null,a.a.createElement(P,null),a.a.createElement(G,null,a.a.createElement(Q,null),a.a.createElement(Xn,null)),a.a.createElement(I.a,null),a.a.createElement(X,null),a.a.createElement(Qn,null))};c.a.render(a.a.createElement(p,null,a.a.createElement(k,null,a.a.createElement(C,null),a.a.createElement(Wn,null))),document.getElementById("root"))}},[[120,1,2]]]);
//# sourceMappingURL=main.2b9e6e68.chunk.js.map